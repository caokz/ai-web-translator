# AI Web Translator - 产品需求文档 (PRD)

> 版本: 1.0
> 日期: 2025-12-06
> 状态: 初稿

---

## 1. 产品概述

### 1.1 产品名称
**AI Web Translator** - 智能网页翻译与内容提炼助手

### 1.2 产品定位
一款基于大语言模型的Chrome浏览器插件，为用户提供高质量的网页翻译和智能内容提炼服务。

### 1.3 目标用户
| 用户群体 | 特征 | 核心需求 |
|----------|------|----------|
| 技术从业者 | 需要阅读英文技术文档、API文档 | 快速理解外文技术内容 |
| 研究人员 | 需要阅读外文论文、研究报告 | 准确翻译学术内容 |
| 学生 | 学习外语、阅读外文教材 | 双语对照学习 |
| 内容创作者 | 需要整理网页内容为笔记 | 快速提炼核心信息 |
| 跨境电商从业者 | 浏览国外网站获取信息 | 批量翻译商品信息 |

### 1.4 核心价值主张
- **高质量翻译**: 利用AI大模型实现更准确、更自然的翻译效果
- **双语对照**: 保留原文，方便对比学习和校验
- **智能提炼**: AI自动提取文章核心观点，生成结构化笔记
- **多模型支持**: 灵活选择翻译引擎，满足不同场景需求

---

## 2. 用户场景

### 场景1: 阅读英文技术文档
**用户**: 前端开发工程师小王
**背景**: 需要阅读React官方文档学习新特性
**痛点**: 英文阅读速度慢，影响学习效率
**期望行为**:
1. 打开React文档页面
2. 点击插件图标，开启翻译
3. 页面显示双语对照，原文下方显示中文译文
4. 遇到不确定的翻译，可以参考原文

### 场景2: 划词快速翻译
**用户**: 研究生小李
**背景**: 阅读英文论文时遇到生词或长句
**痛点**: 切换到翻译工具打断阅读思路
**期望行为**:
1. 选中不理解的句子
2. 弹出翻译气泡显示译文
3. 可以复制译文到笔记
4. 点击其他区域关闭气泡继续阅读

### 场景3: 整理网页内容为笔记
**用户**: 产品经理小张
**背景**: 需要将多篇行业报告整理为内部分享文档
**痛点**: 手动复制整理耗时耗力
**期望行为**:
1. 打开报告页面
2. 点击"提炼内容"按钮
3. 插件自动提取标题、摘要、关键信息
4. 生成结构化Markdown文档
5. 一键下载保存

### 场景4: 快捷键高效操作
**用户**: 重度用户
**背景**: 频繁使用翻译功能，追求效率
**期望行为**:
1. 按 `Alt+T` 快速开启/关闭页面翻译
2. 按 `Alt+E` 快速提炼当前页面内容
3. 无需移动鼠标点击，操作流畅

---

## 3. 功能需求

### 3.1 网页翻译 (F1)

#### F1.1 翻译开关
- **描述**: 在Popup中提供开关，一键开启/关闭当前页面的翻译功能
- **优先级**: P0 (核心功能)
- **验收标准**:
  - [ ] 开关状态与当前页面绑定
  - [ ] 开关状态实时同步到Content Script
  - [ ] 页面刷新后保持之前的开关状态

#### F1.2 双语对照显示
- **描述**: 在每个段落/句子原文下方显示翻译后的中文
- **优先级**: P0 (核心功能)
- **验收标准**:
  - [ ] 译文样式与原文有明显区分（背景色/字体颜色）
  - [ ] 译文不影响原有页面布局
  - [ ] 支持切换"仅显示译文"和"双语对照"模式

#### F1.3 增量翻译
- **描述**: 当页面滚动加载新内容时，自动翻译新出现的内容
- **优先级**: P1 (重要功能)
- **验收标准**:
  - [ ] 使用MutationObserver监听DOM变化
  - [ ] 仅翻译新增内容，避免重复翻译
  - [ ] 滚动时翻译不阻塞页面渲染

#### F1.4 翻译缓存
- **描述**: 已翻译的内容缓存到本地，避免重复请求API
- **优先级**: P1 (重要功能)
- **验收标准**:
  - [ ] 相同文本在同一页面不重复请求
  - [ ] 缓存按URL分组存储
  - [ ] 缓存有过期机制（7天）
  - [ ] 提供清除缓存的选项

#### F1.5 排除规则
- **描述**: 特定内容不进行翻译
- **优先级**: P1 (重要功能)
- **排除范围**:
  - 代码块 (`<code>`, `<pre>`)
  - 数学公式 (MathJax, KaTeX)
  - 已是中文的内容
  - 纯数字、URL、邮箱地址
- **验收标准**:
  - [ ] 代码块内容保持原样
  - [ ] 公式渲染不受影响
  - [ ] 支持自定义排除规则（高级设置）

#### F1.6 划词翻译
- **描述**: 选中任意文本后显示翻译气泡
- **优先级**: P0 (核心功能)
- **验收标准**:
  - [ ] 选中文本后0.5秒内显示气泡
  - [ ] 气泡位置跟随选中文本
  - [ ] 气泡内显示译文，支持复制
  - [ ] 点击气泡外部区域关闭
  - [ ] 支持翻译单词显示释义

#### F1.7 快捷键支持
- **描述**: 支持键盘快捷键操作
- **优先级**: P1 (重要功能)
- **快捷键定义**:
  - `Alt+T`: 开启/关闭页面翻译
- **验收标准**:
  - [ ] 快捷键全局生效
  - [ ] 可在设置中自定义快捷键
  - [ ] 与其他插件快捷键不冲突

---

### 3.2 内容提炼 (F2)

#### F2.1 智能提取
- **描述**: 自动识别网页中的文章标题、正文、关键信息
- **优先级**: P0 (核心功能)
- **验收标准**:
  - [ ] 准确识别文章标题
  - [ ] 提取正文内容，过滤广告/导航等
  - [ ] 识别文章中的关键观点

#### F2.2 结构化输出
- **描述**: 生成带层级的Markdown文档
- **优先级**: P0 (核心功能)
- **输出格式**:
```markdown
# 文章标题

## 摘要
[AI生成的摘要]

## 核心观点
- 观点1
- 观点2
- 观点3

## 正文内容
[结构化的正文]

---
> 来源: [原文URL]
> 提炼时间: [时间戳]
```
- **验收标准**:
  - [ ] Markdown格式正确可渲染
  - [ ] 层级结构清晰
  - [ ] 包含元信息（来源、时间）

#### F2.3 摘要生成
- **描述**: 利用AI生成文章核心观点摘要
- **优先级**: P0 (核心功能)
- **验收标准**:
  - [ ] 摘要长度200-500字
  - [ ] 摘要涵盖文章主要内容
  - [ ] 语言流畅、逻辑清晰

#### F2.4 导出功能
- **描述**: 一键下载生成的Markdown文件
- **优先级**: P0 (核心功能)
- **验收标准**:
  - [ ] 点击导出按钮下载.md文件
  - [ ] 文件名格式: `[文章标题]-[日期].md`
  - [ ] 文件编码UTF-8

#### F2.5 快捷键支持
- **描述**: 支持快捷键快速提炼
- **优先级**: P1 (重要功能)
- **快捷键定义**:
  - `Alt+E`: 提炼当前页面
- **验收标准**:
  - [ ] 快捷键触发后弹出提炼结果
  - [ ] 可在设置中自定义快捷键

---

### 3.3 大模型配置 (F3)

#### F3.1 多模型支持
- **描述**: 支持多种大语言模型API
- **优先级**: P0 (核心功能)
- **支持的模型**:

| 模型 | 厂商 | 说明 |
|------|------|------|
| DeepSeek | 深度求索 | 性价比高，中文效果好 |
| Kimi | 月之暗面 | 长文本处理能力强 |
| OpenAI兼容 | - | 支持任意OpenAI格式API |
| 通义千问 | 阿里云 | 国内访问稳定 |
| 文心一言 | 百度 | 国内访问稳定 |

- **验收标准**:
  - [ ] 每种模型可独立配置
  - [ ] 模型列表可动态扩展
  - [ ] 提供模型推荐指南

#### F3.2 API配置
- **描述**: 支持配置API Key和自定义API地址
- **优先级**: P0 (核心功能)
- **配置项**:
  - API Key (必填)
  - Base URL (可选，用于自定义代理)
- **验收标准**:
  - [ ] 配置界面友好易用
  - [ ] 支持验证API Key有效性
  - [ ] API Key加密存储

#### F3.3 参数调节
- **描述**: 支持调节模型参数
- **优先级**: P2 (扩展功能)
- **可调参数**:
  - Temperature (创造性，0-1)
  - Max Tokens (最大输出长度)
- **验收标准**:
  - [ ] 提供参数说明
  - [ ] 参数有合理默认值
  - [ ] 参数范围有限制

#### F3.4 模型切换
- **描述**: 可为不同功能选择不同模型
- **优先级**: P2 (扩展功能)
- **验收标准**:
  - [ ] 翻译功能可选择专用模型
  - [ ] 提炼功能可选择专用模型
  - [ ] 支持设置默认模型

---

## 4. 非功能需求

### 4.1 性能要求
| 指标 | 要求 |
|------|------|
| 翻译响应时间 | 单段落 < 3秒 |
| 提炼响应时间 | 整页 < 10秒 |
| 划词翻译响应 | < 1秒 |
| 内存占用 | < 100MB |
| CPU占用 | 空闲时 < 1% |

### 4.2 安全要求
- API Key采用加密存储，不明文保存
- 不收集用户浏览历史和个人数据
- 翻译内容不上传到除API外的任何服务器
- 支持本地部署的模型API

### 4.3 兼容性要求
- 浏览器: Chrome 88+, Edge 88+ (Chromium内核)
- 操作系统: Windows, macOS, Linux
- 页面: 支持绝大多数网页，特殊页面(PDF、本地文件)暂不支持

### 4.4 可用性要求
- 安装后无需额外配置即可使用(使用默认模型)
- 界面语言: 中文
- 提供新手引导教程
- 关键操作有加载状态和错误提示

---

## 5. 界面设计

### 5.1 Popup界面
```
┌─────────────────────────────────┐
│  AI Web Translator     [设置⚙️] │
├─────────────────────────────────┤
│                                 │
│  翻译当前页面                    │
│  ┌───────────────────────────┐  │
│  │ [  OFF  |  ON  ]          │  │
│  └───────────────────────────┘  │
│                                 │
│  ───────────────────────────    │
│                                 │
│  [ 📝 提炼内容 ]                │
│                                 │
│  ───────────────────────────    │
│                                 │
│  当前模型: DeepSeek ▼           │
│                                 │
└─────────────────────────────────┘
```

### 5.2 Options设置页
- 模型配置
  - API Key设置
  - Base URL设置
  - 参数调节
- 翻译设置
  - 显示模式（双语/仅译文）
  - 排除规则
  - 快捷键配置
- 缓存管理
  - 查看缓存大小
  - 清除缓存

### 5.3 划词翻译气泡
```
┌──────────────────────────────┐
│ 这是翻译后的中文内容           │
│                              │
│ [复制] [朗读]                 │
└──────────────────────────────┘
       ▼
```

---

## 6. 数据指标

### 6.1 核心指标
| 指标 | 定义 | 目标 |
|------|------|------|
| 日活用户 (DAU) | 每日使用插件的独立用户数 | - |
| 翻译次数 | 用户触发翻译的总次数 | - |
| 提炼次数 | 用户触发提炼的总次数 | - |
| API调用成功率 | 成功调用/总调用 | > 99% |

### 6.2 体验指标
| 指标 | 定义 | 目标 |
|------|------|------|
| 翻译满意度 | 用户反馈好评率 | > 90% |
| 首次翻译时间 | 从点击到显示译文 | < 3秒 |
| 插件崩溃率 | 崩溃次数/打开次数 | < 0.1% |

---

## 7. 版本规划

### v1.0 (MVP)
- [x] 网页翻译（双语对照）
- [x] 划词翻译
- [x] 内容提炼（Markdown导出）
- [x] 多模型支持（DeepSeek、Kimi）
- [x] 快捷键支持

### v1.1
- [ ] 更多模型支持（通义千问、文心一言）
- [ ] 翻译缓存优化
- [ ] 自定义排除规则

### v1.2
- [ ] 翻译历史记录
- [ ] 批量翻译模式
- [ ] 导出格式扩展（PDF、Word）

### v2.0
- [ ] 离线翻译支持
- [ ] 团队协作功能
- [ ] 插件市场上架

---

## 8. 附录

### 8.1 术语表
| 术语 | 定义 |
|------|------|
| LLM | Large Language Model，大语言模型 |
| Popup | Chrome插件点击图标后弹出的界面 |
| Content Script | 注入到网页中运行的脚本 |
| Service Worker | 插件后台运行的服务进程 |

### 8.2 参考资料
- [Chrome Extension Manifest V3](https://developer.chrome.com/docs/extensions/mv3/)
- [DeepSeek API文档](https://platform.deepseek.com/api-docs/)
- [Kimi API文档](https://platform.moonshot.cn/docs/)
